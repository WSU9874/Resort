<!DOCTYPE html>
<html>
  <head>
    <title>Simple Marker</title>
    <script type ="text/javascript" src="/js/apikey.js"></script>
    <script>
      // Wait for the API key to be loaded from apikey.js before initializing the map
      window.onload = function() {
        const API_KEY = config.apikey;
        initMap(API_KEY);
      };

      function initMap(apiKey) {
        // Use the API key to load the Google Maps API
        const script = document.createElement('script');
        script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMapCallback&libraries=maps,marker&v=beta`;
        document.body.appendChild(script);
      }

      function initMapCallback() {
        // Callback function after the Google Maps API is loaded
        const map = new google.maps.Map(document.getElementById('map'), {
          center: { lat: 34.40071105957031, lng: 126.32814025878906 },
          zoom: 14
        });

        // Add a marker to the map
        const marker = new google.maps.Marker({
          position: { lat: 34.40071105957031, lng: 126.32814025878906 },
          map: map,
          title: 'My location'
        });
      }
    </script>
    
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }

      /* Optional: Makes the sample page fill the window. */
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
  </body>
</html>
